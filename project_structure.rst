===================
 Структура проекта
===================

Проекты для Odoo версии 14.0 находятся в каталоге ``/opt/odoo-projects/14.0/projects``.
Для других версий - по-аналогии.

Для каждого проекта есть:

1. среда для запуска

2. odoo-модули проекта, или просто модули. Или аддоны

Среда для запуска
-----------------

Среда для запуска может быть создана самостоятельно, для этого надо перейти в каталог проектов и выполнить команду

.. code-block:: sh

   cd /opt/odoo-projects/14.0/projects
   ./scaffold project_name

Среда для запуска является git-репозиторием.
Так было сделано, чтобы была возможность обмениваться со средой для запуска со своими коллегами.
Коллега в свою очередь сможет сэкономить время для настройки среды.

К примеру, чтобы получить готовую среду для разработки saas модулей, надо:

1. склонировать среду из репозитория

.. code-block:: sh

   cd /opt/odoo-projects/14.0/projects
   git clone  -b 14.0-saas --single-branch https://github.com/em230418/odoo-project-template.git saas

2. ознакомиться для дальнейших указания в настройке:

   cd saas
   less README.rst

По структуре файлов, проект выглядит следующим образом:

- ``Dockerfile`` - определение docker-образа проекта.
  В этот файл обычно ставят необходимые python-пакеты и какие-либо приложений из самой ОС.
  Эта ОС - Debian GNU/Linux.

- ``docker-compose.yml`` - определение docker-контейнеров, которые будут запускаться.
  Среди этих контейнеров:

  - ``web`` - сам контейнер c odoo
  - ``longpolling`` - контейнер odoo, отвечающий за longpolling
  - ``db`` - база данных PostgreSQL
  - ``wdb`` - отладчик wdb
  - ``smtpfake`` - фейковая smtp-почта
  - ``proxy`` - прокси-сервер

  Помимо обращения к odoo контейнерам, прокси-сервер нужен, чтобы можно было удобно обратиться к вспомогательным контейнерам, такие как отладчик wdb и фейковая почта.

  Для обращения используются следующие адреса:

  - ``http://odoo.localhost`` - сам odoo
  - ``http://wdb.localhost`` - отладчик
  - ``http://mail.localhost`` - фейковая почта

- ``odoo.conf`` - файлы с настройками odoo
  В ней одно из вещей, которую необходимо настроить самим, это путь к модулям проекта.
  Об этом будет упомянуто в следующем разделе.

- ``.dockerignore`` - TODO

- ``.gitignore`` - TODO

- ``README.rst`` - TODO
